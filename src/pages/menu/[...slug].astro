---
import { getCollection, getEntryBySlug } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import Estructura from "@/components/ui/Estructura.astro";

export async function getStaticPaths() {
    const platillos = await getCollection("menu");
    return platillos.map((platillo) => ({
        params: { slug: platillo.slug },
        props: { platillo },
    }));
}

const { slug } = Astro.params;
const { platillo } = Astro.props;
const { Content } = await platillo.render();
---

<Layout>
    <Estructura>
        <div
            class="flex flex-col md:flex-row justify-between gap-8 max-w-4xl mx-auto px-4"
        >
            <div class="md:w-1/2">
                <img
                    src={platillo.data.image_url}
                    alt={platillo.data.name}
                    class="w-full h-64 md:h-96 object-cover rounded-lg shadow-lg my-6"
                    loading="lazy"
                />
            </div>

            <section class="md:w-1/2 flex flex-col justify-center items-center">
                <div>
                    <h1
                        class="text-2xl md:text-3xl font-bold text-secondary-medium"
                    >
                        {platillo.data.name}
                    </h1>
                    <p
                        class="text-xl md:text-2xl text-cuarto-light font-bold mt-2"
                    >
                        ${platillo.data.price}
                    </p>
                </div>

                <div class="prose max-w-none mt-6 text-secondary-medium/80">
                    <Content />
                </div>

                <a
                    href="/menu/"
                    class="mt-7 inline-block w-40 px-4 py-2 bg-primary-medium hover:bg-primary-ligth text-secondary-medium hover:text-secondary-light rounded-full transition-colors duration-300 font-medium text-lg"
                >
                    Volver al Menu
                </a>
            </section>
        </div>
    </Estructura>
</Layout>

<style is:global>
    .prose h2 {
        font-size: 1.25rem;
        font-weight: 700;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
        color: #1e293b;
    }
    .prose p {
        margin-top: 0.75rem;
        margin-bottom: 0.75rem;
        line-height: 1.625;
    }
    .prose ul {
        list-style-type: disc;
        padding-left: 1.25rem;
    }
    .prose ul > li {
        margin-bottom: 0.25rem;
    }
</style>
